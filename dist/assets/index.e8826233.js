import{_ as S,e as h}from"./index.8afd0b43.js";import{P as B}from"./index.51eea59d.js";import{E as y,z as _,$ as I,a0 as V,A as a,B as m,C as o,I as t,G as c,W as g,V as f,M as u,L as s,D as r,K as v,S as z,U as L}from"./element-plus.ac5c70aa.js";const j={components:{Page:B},props:["id"],async created(){this.loading=!0;const{data:l}=await h.post("/rental/detail/",{id:this.id});l.cover=l.imgs.split(`
`)[0].replace("https","http"),this.detail=l;const{data:{result:p}}=await h.post("/rental/",{location__icontains:this.detail.location.split("-").slice(0,2).join("-"),page:1,pagesize:5,orderby:"?"});this.list=p.map(d=>(d.cover=d.imgs.split(`
`)[0].replace("https","http"),d)),this.loading=!1},data(){return{number:0,list:[],loading:!1,detail:null}},methods:{async reserve(){const{data:l}=await h.post("rental/reserve/",{title:this.detail.title,price_text:this.detail.price_text,structure:this.detail.structure,tags:this.detail.tags,area_text:this.detail.area_text,city:this.detail.city,location:this.detail.location,floor:this.detail.floor}),{success:p,message:d}=l;p?y({title:"\u63D0\u793A",message:d,type:"success"}):y({title:"\u63D0\u793A",message:d,type:"error"})},toDetail(l){this.$router.push({name:"Detail",params:{id:l}})},jsonify(l){return JSON.parse(l)}}},E=l=>(z("data-v-bc3502d2"),l=l(),L(),l),M={key:0},T={class:"text-2xl text-gray-800 font-bold mb-5"},H={class:"flex gap-4"},q={class:"text-gray-800"},A={class:"text-gray-800"},F={class:"text-gray-800"},G={class:"text-gray-800"},J={class:"text-gray-800"},K={key:0},O={class:"text-blue-400 text-lg font-bold"},U=["innerHTML"],W={class:"mt-10"},Q=["src"],R=E(()=>t("div",{class:"font-bold text-black-400 mb-5 text-center"},"\u76F8\u5173\u63A8\u8350",-1)),X={class:"flex flex-col items-center gap-4"},Y=["onClick"],Z={style:{width:"170px",height:"127px"},class:"m-auto"},$=["src"],ee={class:"truncate mt-2 text-gray-800 text-sm"},te={class:"truncate mt-2 text-gray-400 text-sm"},se={class:"text-red-600 mt-3"};function le(l,p,d,ie,e,x){const b=_("el-image"),n=_("el-descriptions-item"),k=_("el-tag"),w=_("el-button"),C=_("el-descriptions"),D=_("el-empty"),P=_("Page"),N=I("loading");return V((a(),m(P,null,{right:o(()=>[R,t("div",X,[(a(!0),c(f,null,g(e.list,i=>(a(),c("div",{key:i.id,class:"bg-white rounded p-4 produce w-full",onClick:oe=>x.toDetail(i.id)},[t("div",Z,[t("img",{class:"rounded",src:i.cover,referrerPolicy:"no-referrer",style:{"user-select":"none","-webkit-user-drag":"none",width:"100%",height:"100%"}},null,8,$)]),t("div",ee,s(i.title),1),t("div",te,s(i.location),1),t("div",se,s(i.price_text),1)],8,Y))),128)),e.list.length==0?(a(),m(D,{key:0,"image-size":200,description:"\u6682\u65E0\u76F8\u5173\u4EA7\u54C1"})):u("",!0)])]),default:o(()=>[e.detail?(a(),c("div",M,[t("h1",T,s(e.detail.title),1),t("div",H,[r(b,{style:{width:"565px",height:"319px"},src:e.detail.cover,referrerPolicy:"no-referrer"},null,8,["src"]),r(C,{column:"1",size:"large",class:"border p-4 w-full"},{default:o(()=>[r(n,{label:"\u6240\u5C5E\u57CE\u5E02:"},{default:o(()=>[t("span",q,s(e.detail.province)+"-"+s(e.detail.city),1)]),_:1}),r(n,{label:"\u623F\u6E90\u4F4D\u7F6E:"},{default:o(()=>[t("span",A,s(e.detail.location),1)]),_:1}),r(n,{label:"\u79DF\u8D41\u65B9\u5F0F:"},{default:o(()=>[t("span",F,s(e.detail.type),1)]),_:1}),r(n,{label:"\u623F\u5C4B\u7C7B\u578B:"},{default:o(()=>[t("span",G,s(e.detail.structure)+" "+s(e.detail.area_text),1)]),_:1}),r(n,{label:"\u671D\u5411\u697C\u5C42:"},{default:o(()=>[t("span",J,s(e.detail.orientation)+" "+s(e.detail.level)+"/"+s(e.detail.floor)+"\u5C42",1)]),_:1}),r(n,{label:"\u6807\u7B7E:"},{default:o(()=>[e.detail.tags?(a(),c("span",K,[(a(!0),c(f,null,g(e.detail.tags.split(","),i=>(a(),m(k,{key:i,class:"mr-2",type:"info"},{default:o(()=>[v(s(i),1)]),_:2},1024))),128))])):u("",!0)]),_:1}),r(n,{label:"\u4EF7\u683C:"},{default:o(()=>[t("span",O,s(e.detail.price_text),1)]),_:1}),r(n,{label:"\u9884\u5B9A:"},{default:o(()=>[r(w,{type:"primary",onClick:p[0]||(p[0]=i=>x.reserve())},{default:o(()=>[v("\u9884\u5B9A")]),_:1})]),_:1})]),_:1})]),t("div",{innerHTML:e.detail.detail,class:"content"},null,8,U),t("div",W,[(a(!0),c(f,null,g(e.detail.imgs.split(`
`),i=>(a(),c("div",{key:i},[i!="https://s1.ljcdn.com/matrix_pc/dist/pc/src/resource/default/565-319.png?_v=20220908152455b3e"?(a(),c("img",{key:0,class:"rounded",src:i,referrerPolicy:"no-referrer"},null,8,Q)):u("",!0)]))),128))])])):u("",!0)]),_:1})),[[N,e.loading]])}var ce=S(j,[["render",le],["__scopeId","data-v-bc3502d2"]]);export{ce as default};
